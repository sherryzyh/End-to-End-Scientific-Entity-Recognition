Proceedings O
of O
the O
2020 O
Conference O
on O
Empirical O
Methods O
in O
Natural O
Language O
Processing O
, O
pages O
6913–6922 O
, O
November O
16–20 O
, O
2020 O
. O

c O

2020 O
Association O
for O
Computational O
Linguistics6913“What O

Do O
You O
Mean O
by O
That O
? O
” O

A O
Parser O
- O
Independent O
Interactive O
Approach O
for O
Enhancing O
Text O
- O
to O
- O
SQL O
Yuntao O
Li1 O
, O
Bei O
Chen2 O
, O
Qian O
Liu3 O
, O
Yan O
Gao2 O
, O
Jian O
- O
Guang O
Lou2 O
, O
Yan O
Zhang1 O
, O
Dongmei O
Zhang2 O
1Department O
of O
Machine O
Intelligence O
, O
Peking O
University O
, O
Beijing O
, O
China O
2Microsoft O
Research O
, O
Beijing O
, O
China;3Beihang O
University O
, O
Beijing O
, O
China O
1fli.yt O
, O
zhyzhy001g@pku.edu.cn;3qian.liu@buaa.edu.cn O
2fbeichen O
, O
yan.gao O
, O
jlou O
, O
dongmeiz O
g@microsoft.com O

Abstract O
In O
Natural O
Language O
Interfaces O
to O
Databases O
systems O
, O
the O
text O
- O
to O
- O
SQL O
technique O
allows O
users O
to O
query O
databases O
by O
using O
natural O
lan- O
guage O
questions O
. O

Though O
signiﬁcant O
progress O
in O
this O
area O
has O
been O
made O
recently O
, O
most O
parsers O
may O
fall O
short O
when O
they O
are O
deployed O
in O
real O
systems O
. O

One O
main O
reason O
stems O
from O
the O
difﬁculty O
of O
fully O
understanding O
the O
users O
’ O
natural O
language O
questions O
. O

In O
this O
paper O
, O
we O
include O
human O
in O
the O
loop O
and O
present O
a O
novel O
parser O
- O
independent O
interactive O
approach O
( O
PIIA O
) O
that O
interacts O
with O
users O
using O
multi- O
choice O
questions O
and O
can O
easily O
work O
with O
arbi- O
trary O
parsers O
. O

Experiments O
were O
conducted O
on O
two O
cross O
- O
domain O
datasets O
, O
the O
WikiSQL O
and O
the O
more O
complex O
Spider O
, O
with O
ﬁve O
state O
- O
of- O
the O
- O
art O
parsers O
. O

These O
demonstrated O
that O
PIIA O
is O
capable O
of O
enhancing O
the O
text O
- O
to O
- O
SQL O
perfor- O
mance O
with O
limited O
interaction O
turns O
by O
using O
both O
simulation O
and O
human O
evaluation O
. O

1 O
Introduction O
The O
past O
few O
years O
have O
witnessed O
a O
burgeoning O
in- O
terest O
in O
the O
study O
of O
text O
- O
to O
- O
SQL O
, O
the O
essential O
tech- O
nique O
for O
Natural O
Language O
Interfaces O
to O
Databases O
( O
NLIDB O
) O
systems O
( O
Guo O
et O
al O
. O
, O
2019 O
; O
Hwang O
et O
al O
. O
, O
2019 O
; O
He O
et O
al O
. O
, O
2019a O
; O
Bogin O
et O
al O
. O
, O
2019a O
, O
b O
) O
. O

By O
converting O
natural O
language O
( O
NL O
) O
questions O
into O
executable O
forms O
( O
i.e. O
, O
Structured O
Query O
Language O
or O
SQL O
) O
, O
text O
- O
to O
- O
SQL O
parsers O
relieve O
users O
from O
the O
burden O
of O
learning O
about O
techniques O
behind O
the O
queries O
. O

Though O
signiﬁcant O
progress O
has O
been O
made O
in O
this O
ﬁeld O
, O
most O
parsers O
are O
still O
less O
than O
de- O
sirable O
when O
deployed O
in O
real O
NLIDB O
systems O
. O

As O
users O
are O
not O
experts O
in O
database O
querying O
, O
a O
central O
challenge O
for O
the O
parsers O
is O
to O
fully O
understand O
the O
users O
’ O
NL O
questions O
. O

Since O
users O
are O
who O
know O
the O
questions O
best O
, O
in- O
teracting O
with O
them O
has O
been O
seen O
as O
a O
promising O
Work O
done O
during O
an O
internship O
at O
Microsoft O
Research.way O
to O
tackle O
the O
above O
challenge O
in O
real O
NLIDB O
systems O
. O

Early O
works O
tried O
to O
get O
users O
involved O
in O
checking O
SQL O
queries O
( O
Li O
and O
Jagadish O
, O
2014 O
; O
Iyer O
et O
al O
. O
, O
2017 O
; O
Yaghmazadeh O
et O
al O
. O
, O
2017 O
) O
, O
which O
are O
impracticable O
in O
real O
systems O
, O
as O
they O
can O
only O
succeed O
if O
users O
have O
a O
very O
good O
knowledge O
of O
SQL O
. O

In O
another O
attempt O
to O
involves O
users O
, O
Gur O
et O
al O
. O

( O
2018 O
) O
proposed O
to O
interact O
with O
non O
- O
expert O
users O
by O
multi O
- O
choice O
questions O
. O

However O
, O
this O
ap- O
proach O
is O
designed O
for O
relatively O
simple O
scenarios O
and O
can O
not O
be O
easily O
applied O
to O
more O
complex O
ones O
. O

More O
recently O
, O

Yao O
et O
al O
. O

( O
2019 O
) O
took O
an O
important O
step O
forward O
by O
measuring O
uncertainty O
of O
neural- O
based O
parsers O
and O
altering O
the O
behavior O
of O
them O
. O

However O
, O
as O
far O
as O
we O
know O
, O
most O
parsers O
in O
real O
systems O
are O
equipped O
with O
elaborate O
rules O
instead O
of O
using O
fully O
neural O
methods O
( O
Dhamdhere O
et O
al O
. O
, O
2017 O
; O
Gliozzo O
et O
al O
. O
, O
2013 O
; O
Lai O
et O
al O
. O
, O
2014 O
) O
. O

More- O
over O
, O
in O
some O
situations O
, O
parsers O
are O
supplied O
by O
third O
parties O
, O
making O
it O
impossible O
to O
alter O
them O
. O

Therefore O
, O
assuming O
parsers O
are O
a O
black O
box O
, O
it O
is O
indispensable O
to O
conduct O
research O
on O
an O
interactive O
approach O
for O
enhancing O
the O
text O
- O
to O
- O
SQL O
technique O
in O
complex O
scenarios O
. O

In O
this O
paper O
, O
we O
propose O
a O
Parser- O

Independent O
Interactive O
Approach O
( O
PIIA O
) O
to O
interact O
with O
hu- O
man O
users O
and O
help O
parsers O
better O
understand O
NL O
questions O
. O

To O
achieve O
this O
goal O
, O
we O
devised O
three O
modules O
: O
( O
1 O
) O
Error O
Locator O
employs O
an O
alignment O
method O
to O
help O
parsers O
locate O
uncertain O
tokens O
in O
the O
NL O
questions O
. O

( O
2 O
) O
Question O
Generator O
de- O
signs O
multi O
- O
choice O
questions O
in O
natural O
language O
for O
users O
, O
which O
offers O
a O
pleasant O
interactive O
expe- O
rience O
. O

( O
3 O
) O
NL O
Modiﬁer O
rewrites O
the O
NL O
questions O
according O
to O
the O
users O
’ O
feedback O
and O
produces O
more O
legible O
questions O
to O
facilitate O
downstream O
parsing O
. O

Our O
major O
contributions O
are O
: O
•We O
propose O
a O
novel O
interactive O
approach O
, O
named O
PIIA O
, O
to O
enhance O
the O
text O
- O
to O
- O
SQL O
for O
complex O

6914 O
Error O
Locat O
or O
Question O
Generator O
NL O
  O
ModifierNL O
Choice O
Question O
ResultUser O
Interactive O
Agent O
Predicted O
SQL O
𝐲 O

Uncertain O
Tokens O
Corrected O
NL O
ො𝐱NL O
Question O
𝐱 O
User O
FeedbackText O
- O
to O
- O
SQL O
    O
ParserMulti O
-turn O

Interaction O
New O
Predicted O
SQL O
ො𝐲Figure O
1 O
: O
The O
schema O
of O
PIIA O
, O
consisting O
of O
Error O
Lo- O
cator O
, O
Question O
Generator O
and O
NL O
Modiﬁer O
. O

SQL O
queries O
in O
a O
cross O
- O
domain O
scenario O
. O

•The O
interaction O
process O
in O
PIIA O
is O
user O
- O
friendly O
that O
asks O
multi O
- O
choice O
questions O
and O
reduces O
the O
number O
of O
questions O
as O
much O
as O
possible O
. O

•PIIA O
is O
designed O
as O
a O
parser O
- O
independent O
ap- O
proach O
that O
can O
easily O
collaborate O
with O
arbitrary O
base O
parsers O
and O
be O
deployed O
in O
real O
systems O
. O

•We O
conduct O
a O
series O
of O
experiments O
with O
ﬁve O
base O
parsers O
on O
two O
large O
cross O
- O
domain O
datasets O
that O
demonstrate O
the O
effectiveness O
of O
PIIA O
by O
using O
both O
simulation O
and O
human O
evaluation O
. O

2 O
Methodology O
Overview O
While O
querying O
databases O
in O
an O
NLIDB O
system O
, O
users O
pose O
a O
natural O
language O
question O
that O
is O
de- O
noted O
as O
x. O
The O
text O
- O
to O
- O
SQL O
parser O
takes O
xas O
input O
and O
predicts O
a O
SQL O
query O
, O
which O
is O
denoted O
as O
y. O
The O
system O
then O
executes O
the O
predicted O
SQL O
and O
returns O
the O
result O
. O

As O
mentioned O
, O
users O
are O
not O
experts O
in O
database O
querying O
, O
so O
they O
may O
pose O
nat- O
ural O
language O
questions O
with O
inexplicit O
expressions O
. O

To O
better O
understand O
the O
difﬁculties O
caused O
by O
inex- O
plicit O
expressions O
, O
we O
carefully O
analyzed O
300 O
mis- O
takes O
made O
by O
IRNet O
( O
Guo O
et O
al O
. O
, O
2019 O
) O
, O
one O
of O
the O
state O
- O
of O
- O
the O
- O
art O
parsers O
on O
the O
Spider O
dataset O
( O
Yu O
et O
al O
. O
, O
2018b O
) O
. O

We O
found O
that O
in O
47.3 O
% O
of O
the O
cases O
the O
parser O
could O
n’t O
understand O
database O
- O
related O
in- O
formation O
, O
such O
as O
table O
and O
column O
names O
as O
well O
as O
values O
. O

Thus O
, O
we O
build O
PIIA O
upon O
parsers O
that O
can O
interactively O
revise O
inexplicit O
expressions O
in O
x O
with O
the O
help O
of O
users O
’ O
feedback O
, O
thus O
enhancing O
the O
performance O
of O
text O
- O
to O
- O
SQL O
. O

Our O
proposed O
PIIA O
, O
shown O
schematically O
in O
Fig- O
ure O
1 O
, O
works O
between O
the O
user O
and O
the O
text O
- O
to O
- O
SQL O
parser O
and O
it O
consists O
of O
three O
modules O
, O
Error O
Lo- O
cator O
, O
Question O
Generator O
and O
NL O
Modiﬁer O
. O

Af- O
ter O
receiving O
xandy O
, O
the O
Error O
Locator O
helps O
the O
𝑍∶∶=𝑖𝑛𝑡𝑒𝑟𝑠𝑒𝑐𝑡 O
𝑅𝑅𝑢𝑛𝑖𝑜𝑛𝑅𝑅𝑒𝑥𝑐𝑒𝑝𝑡𝑅𝑅|𝑅 O
𝑅∶∶=𝑆𝑒𝑙𝑒𝑐𝑡𝐹𝑖𝑙𝑡𝑒𝑟𝑂𝑟𝑑𝑒𝑟|𝑆𝑒𝑙𝑒𝑐𝑡𝐹𝑖𝑙𝑡𝑒𝑟 O
|𝑆𝑒𝑙𝑒𝑐𝑡𝑂𝑟𝑑𝑒𝑟|𝑆𝑒𝑙𝑒𝑐𝑡 O
𝑆𝑒𝑙𝑒𝑐𝑡∶∶=𝐴𝐴𝐴𝐴𝐴𝐴𝐴𝐴𝐴𝐴𝐴𝐴𝐴𝐴𝐴 O
𝐹𝑖𝑙𝑡𝑒𝑟∶∶=𝐹𝑖𝑙𝑡𝑒𝑟𝑎𝑛𝑑𝐹𝑖𝑙𝑡𝑒𝑟𝐹𝑖𝑙𝑡𝑒𝑟𝑜𝑟𝐹𝑖𝑙𝑡𝑒𝑟=𝐴𝑉|>𝐴𝑉 O
|<𝐴𝑉≥𝐴𝑉≤𝐴𝑉≠𝐴𝑉𝑏𝑒𝑡𝑤𝑒𝑒𝑛 O
𝐴𝑉𝑉 O
𝑂𝑟𝑑𝑒𝑟∶∶=𝑎𝑠𝑐𝐴|𝑎𝑠𝑐𝐴𝑙𝑖𝑚𝑖𝑡𝑛𝑢𝑚𝑏𝑒𝑟 O
𝑑𝑒𝑐𝐴𝑑𝑒𝑐𝐴𝑙𝑖𝑚𝑖𝑡𝑛𝑢𝑚𝑏𝑒𝑟 O
𝐴∶∶=𝑛𝑜𝑛𝑒𝐶𝑇max𝐶𝑇min𝐶𝑇 O
𝑐𝑜𝑢𝑛𝑡𝐶𝑇𝑠𝑢𝑚𝐶𝑇|𝑎𝑣𝑔𝐶𝑇 O

𝐶∶∶=𝑐𝑜𝑙𝑢𝑚𝑛 O
𝑇∶∶=𝑡𝑎𝑏𝑙𝑒 O

𝑉∶∶=𝑣𝑎𝑙𝑢𝑒|𝑅Figure O
2 O
: O
The O
grammar O
of O
the O
intermediate O
language O
. O

In O
a O
speciﬁc O
database O
, O
column O
refers O
to O
distinct O
column O
names O
while O
table O
comprises O
several O
table O
names O
and O
value O
indicates O
the O
value O
tokens O
expressed O
by O
the O
user O
. O

parser O
ﬁnd O
a O
set O
of O
uncertain O
tokens O
in O
x. O
For O
each O
uncertain O
token O
, O
the O
Question O
Generator O
creates O
a O
natural O
language O
multi O
- O
choice O
question O
. O

After O
interactively O
asking O
the O
user O
all O
the O
multi O
- O
choice O
questions O
, O
the O
PIIA O
agent O
collects O
all O
the O
answers O
( O
i.e. O
, O
the O
user O
’s O
selections O
) O
. O

Then O
, O
the O
NL O
Modiﬁer O
corrects O
xbased O
on O
the O
answers O
and O
obtains O
a O
more O
legible O
question O
^ O

x. O
Finally O
, O
by O
feeding O
modiﬁed O
question O
^ O

xinto O
the O
text O
- O
to O
- O
SQL O
parser O
, O
we O
can O
get O
a O
new O
predicted O
SQL O
query O
^ O

y. O

Compared O
to O
x,^ O
x O
combines O
user O
’s O
feedback O
and O
contains O
clearer O
se- O
mantics O
. O

Hence O
^ O
yis O
likely O
more O
accurate O
than O
y. O
Note O
that O
, O
our O
PIIA O
agent O
will O
not O
read O
the O
contents O
of O
the O
databases O
( O
i.e. O
, O
values O
) O
due O
to O
privacy O
con- O
cerns O
. O

Details O
of O
the O
three O
modules O
are O
presented O
in O
Sections O
3 O
, O
4 O
and O
5 O
. O
3 O
Error O
Locator O
The O
goal O
of O
Error O
Locator O
is O
to O
detect O
the O
tokens O
in O
xthat O
are O
hardly O
understood O
by O
the O
parser O
. O

These O
are O
called O
Uncertain O
Tokens O
, O
and O
in O
most O
cases O
are O
related O
to O
database O
information O
, O
such O
as O
table O
and O
column O
names O
as O
well O
as O
values O
. O

When O
the O
parser O
fails O
to O
understand O
them O
, O
the O
uncertain O
tokens O
will O
be O
mistranslated O
or O
ignored O
. O

Since O
the O
parser O
is O
a O
black O
box O
, O
the O
only O
information O
we O
can O
get O
from O
it O
is O
the O
predicted O
SQL O
. O

Hence O
, O
we O
devise O
a O
method O
to O
compare O
the O
NL O
question O
xwith O

the O
predicted O
SQL O
y. O
All O
the O
informative O
tokens O
in O
xmay O
align O
with O
the O
corresponding O
tokens O
in O
y O
, O
while O
the O
unaligned O
tokens O
in O
xare O
extracted O
as O
uncertain O
tokens O
. O

To O
this O
end O
, O
we O
ﬁrstly O
restate O
the O
predicted O
SQL O
yto O
an O
NL O
question O
x0through O
SQL O
- O
to O
- O
Text O
Restate- O
ment O
, O
and O
then O
perform O
Token O
- O
to O
- O
Token O
Alignment O
between O
xandx0 O
. O

6915 O
Find O
the O
last O
name O
of O
the O
student O
who O
has O
a O
cat O
that O
is O
aged O
3.𝐱 O
SELECT O
T1.LName O
FROM O
Student O
AS O
T1 O

WHERE O
T1.Age O

= O
3 O
Find O
out O
the O
LName O
of O
student O
where O
the O
student O
's O
age O
is O
3.Text O
- O
to O
- O
SQL O
Parser O
𝐱′ O
… O
… O
Token O
-to O
- O
Token O
Alignment O
SQL O
- O
to O
- O
Text O
Restatement O
Tree O
of O
Intermediate O
Language O
R O
: O
= O
Select O
Filter O
Find O
out O

[ O
Select O
] O
where O
[ O
Filter O
] O
A O
: O
= O
none O
C O
T O
the O
[ O
C O
] O
of O
[ O
T O
] O
Filter O
: O

= O
= O
A O
V O
[ O
A O
] O
is O
[ O
V O
] O
Order O
: O
= O
ascA O
In O
ascending O
order O
of O
[ O
A O
] O
… O
… O

Examples O
of O
Templates O
for O
Grammar O
RulesNatural O
Language O
Question O
𝐱 O
Predicted O
SQL O
𝐲 O
Restate O
dNL O

Question O
𝐱′Similarity O
MatrixBipartite O
Graph O
Matchingcat O
aged O
  O
Uncertain O
Tokens O
BERT O

[ O
CLS O
] O
  O
𝐱[SEP O
] O
𝐱′[SEP]MLP O
+ O
SigmoidFigure O
3 O
: O
Illustration O
of O
Error O
Locator O
with O
a O
real O
case O
from O
IRNet O
on O
the O
Spider O
dataset O
. O

The O
NL O
question O
xis O
parsed O
to O
SQL O
y O
, O
and O
then O
converted O
to O
restated O
NL O
question O
x0via O

SQL O
- O
to O
- O
text O
restatement O
. O

Then O
, O
a O
token O
- O
to- O
token O
alignment O
similarity O
matrix O
between O
xandx0is O
computed O
to O
detect O
uncertain O
tokens O
( O
i.e. O
, O
cat O
and O
aged O
) O
. O

3.1 O
SQL O
- O
to O
- O
Text O
Restatement O
Compared O
to O
aligning O
an O
NL O
question O
with O
a O
SQL O
query O
, O
the O
alignment O
of O
two O
NL O
questions O
is O
more O
reasonable O
because O
it O
utilizes O
a O
similar O
linguistic O
structure O
and O
can O
make O
better O
use O
of O
pre O
- O
trained O
models O
( O
e.g. O
, O
BERT O
) O
. O

Thus O
, O
before O
the O
alignment O
, O
we O
restate O
the O
predicted O
SQL O
yinto O
a O
natural O
lan- O
guage O
question O
x0 O
. O

Previous O
work O
has O
proposed O
sequence O
- O
to O
- O
sequence O
based O
methods O
( O
Guo O
et O
al O
. O
, O
2018 O
) O
that O
can O
not O
ensure O
the O
restatement O
correct- O
ness O
. O

In O
contrast O
, O
we O
carefully O
design O
a O
template- O
based O
SQL O
- O
to O
- O
text O
method O
that O
solves O
this O
problem O
because O
the O
restatement O
correctness O
and O
integrality O
are O
critical O
for O
the O
alignment O
process O
. O

Since O
SQL O
is O
execution O
- O
oriented O
, O
its O
clauses O
are O
about O
database O
operations O
. O

Some O
of O
the O
clauses O
may O
not O
be O
expressed O
in O
the O
users O
’ O
NL O
questions O
, O
such O
as O
GROUPBY O
andJOIN O
. O

To O
bridge O
the O
gap O
between O
natural O
language O
and O
SQL O
, O
we O
design O
an O
intermediate O
language O
that O
is O
inspired O
by O
Guo O
et O

al O
. O

( O
2019 O
) O
and O
whose O
grammar O
is O
shown O
in O
Figure O
2 O
. O

The O
predicted O
SQL O
can O
be O
easily O
converted O
into O
the O
intermediate O
language O
, O
which O
can O
be O
naturally O
rep- O
resented O
by O
a O
hierarchical O
tree O
structure O
. O

Each O
tree O
node O
corresponds O
to O
a O
grammar O
rule O
. O

For O
each O
kind O
of O
grammar O
rule O
, O
we O
design O
a O
few O
natural O
language O
templates O
to O
describe O
it O
. O

Thus O
, O
we O
can O
recursively O
convert O
the O
tree O
into O
a O
natural O
language O
question O
. O

As O
for O
nested O
SQL O
queries O
, O
we O
utilize O
subordinate O
clauses O
with O
“ O
that O
/ O
which O
” O
to O
handle O
the O
subqueries O
. O

The O
SQL O
- O
to O
- O
text O
restatement O
is O
depicted O
on O
the O
left O
of O
Figure O
3 O
, O
along O
with O
a O
concrete O
example O
. O

We O
also O
give O
some O
examples O
of O
templates O
in O
the O
ﬁg- O
ure O
. O

Finally O
, O
the O
restated O
x0has O
the O
same O
semanticsof O
SQL O
yand O
is O
independent O
of O
database O
internal O
operations O
. O

3.2 O
Token O
- O
to O
- O
Token O
Alignment O
Given O
the O
user O
NL O
question O
xand O
the O
restated O
NL O
question O
x0 O
, O
we O
perform O
the O
token O
- O
to O
- O
token O
alignment O
between O
them O
and O
ﬁnd O
out O
the O
uncer- O
tain O
tokens O
in O
x. O
As O
shown O
on O
the O
right O
of O
Figure O
3 O
, O
we O
adopt O
BERT O
( O
Devlin O
et O
al O
. O
, O
2019 O
) O
as O
the O
en- O
coder O
. O

BERT O
is O
pre O
- O
trained O
on O
a O
large O
corpus O
and O
equipped O
with O
the O
ability O
to O
encode O
sentences O
on O
the O
basis O
of O
contextual O
information O
. O

The O
input O
of O
BERT O
is O
the O
concatenation O
of O
the O
two O
questions O
with O
“ O
[ O
CLS O
] O
” O
and O
“ O
[ O
SEP O
] O
” O
. O

Each O
token O
obtains O
an O
output O
vector O
from O
BERT O
, O
which O
is O
fed O
into O
a O
train- O
able O
Multi O
- O
Layer O
Perceptron O
( O
MLP O
) O
layer O
to O
further O
distill O
useful O
information O
. O

Assuming O
that O
xhasN O
tokens O
and O
x0hasMtokens O
, O
we O
can O
denote O
that O
x= O

( O
x1;x2;:::;x O
N)andx0= O
( O
x0 O
1;x0 O
2;:::;x0 O
M O
) O
. O

The O
output O
embeddings O
of O
tokens O
in O
xandx0can O
respectively O
be O
denoted O
by O
H= O
( O
h1;h2 O
; O
: O
: O
: O
; O
hN)2RdN O
; O
U= O
( O
u1;u2 O
; O
: O
: O
: O
; O
uM)2RdM;(1 O
) O
wheredis O
the O
output O
embedding O
size O
. O

Based O
onHandU O
, O
we O
employ O
the O
cosine O
sim- O
ilarity O
to O
derive O
a O
token O
- O
level O
similarity O
matrix O
A2RNM O
, O
where O
each O
entry O
Anmindicates O
the O
similarity O
between O
xnandx0 O
m O
: O

Anm O
= O
h O
> O
num O
jjhnjjjjumjj O
: O
( O
2 O
) O
The O
alignment O
between O
xandx0can O
be O
obtained O
using O
the O
similarity O
scores O
in O
A. O
After O
removing O

6916stop O
words O
and O
words O
from O
SQL O
- O
to O
- O
text O
restate- O
ment O
templates O
, O
we O
regard O
the O
similarity O
scores O
as O
the O
weights O
of O
a O
bipartite O
graph O
and O
apply O
the O
Hun- O
garian O
maximum O
matching O
algorithm O
to O
ﬁnd O
an O
op- O
timized O
token O
- O
level O
one O
- O
to O
- O
one O
alignment O
. O

Finally O
, O
the O
tokens O
in O
xwith O
alignment O
scores O
less O
than O
the O
thresholdpare O
extracted O
as O
uncertain O
tokens O
. O

It O
is O
also O
important O
to O
note O
that O
a O
schema O
- O
aware O
post- O
processing O
is O
operated O
on O
these O
scores O
. O

Since O
the O
tokens O
that O
appear O
more O
than O
once O
in O
the O
database O
schema O
may O
confuse O
the O
alignment O
process O
, O
the O
post O
- O
processing O
aims O
to O
give O
addition O
bias O
and O
help O
Error O
Locator O
detect O
potential O
uncertain O
tokens1 O
. O

3.3 O
Training O
Process O
Since O
the O
annotations O
of O
token O
- O
to O
- O
token O
alignment O
are O
not O
available O
, O
fully O
supervised O
learning O
is O
in- O
feasible O
. O

Inspired O
by O
the O
work O
of O
Legrand O
et O
al O
. O

( O
2016 O
) O
, O
we O
solve O
this O
problem O
by O
leveraging O
nega- O
tive O
sampling O
to O
generate O
training O
data O
and O
adopt O
a O
weakly O
supervised O
training O
strategy O
. O

Concretely O
, O
we O
collect O
several O
pairs O
( O
x;x0 O
pos).xis O
the O
user O
NL O
question O
and O
x0 O
posis O
the O
corresponding O
positive O
re- O
stated O
NL O
question O
restated O
from O
the O
ground O
truth O
SQL O
of O
x. O

For O
each O
( O
x;x0 O
pos)pair O
, O
we O
generate O
negative O
restated O
NL O
questions O
x0 O
negin O
two O
ways O
: O
random O
sampling O
, O
where O
we O
randomly O
pick O
an O
x0 O
from O
other O
pairs O
as O
x0 O
neg O
; O
and O
perturbed O
sampling O
, O
where O
we O
generate O
an O
x0 O
negby O
replacing O
column O
names O
or O
/ O
and O
value O
tokens O
in O
x0 O
pos O
. O

The O
random O
samples O
are O
vastly O
different O
from O
x0 O
pos O
, O
and O
the O
com- O
mon O
tokens O
in O
positive O
and O
negative O
samples O
are O
uninformative O
( O
e.g. O
, O
stop O
words O
) O
. O

This O
kind O
of O
x0 O
neg O
helps O
distinguish O
the O
informative O
and O
uninforma- O
tive O
tokens O
. O

The O
perturbed O
samples O
have O
the O
same O
uninformative O
tokens O
with O
x0 O
pos O
, O
and O
help O
model O
to O
focus O
on O
the O
alignment O
of O
informative O
tokens O
. O

We O
generate O
50random O
samples O
and O
50perturbed O
samples O
for O
each O
( O
x;x0 O
pos)pair O
. O

By O
generating O
negative O
samples O
, O
we O
obtain O
the O
training O
data O
composed O
of O
triples O
( O
x;x0 O
pos;x0 O
neg O
) O
. O

The O
intuition O
behind O
the O
weakly O
supervised O
training O
is O
that O
xis O
more O
similar O
to O
x0 O
posthan O
x0 O
neg O
. O

We O
measure O
the O
sentence O
- O
level O
similarity O
by O
averaging O
the O
token O
- O
level O
similarities O
: O
s(x;x0 O
) O
= O
1 O
NNX O
n=1Mmax O
m=1Anm O
: O
( O
3 O
) O
1We O
lower O
the O
alignment O
score O
of O
a O
token O
( O
denoted O
as O
S O
) O
by O
the O
number O
of O
its O
occurrences O
( O
denoted O
as O
C O
) O
in O
the O
database O
schema O
( O
the O
score O
is O
lowered O
to O
S O
= O
C O
) O
. O

Question O
Generator O
1 O
. O

What O
do O
you O
mean O
by O
‘ O
cat O
’ O
? O

A. O
Col O
: O
pet O
type O
  O
B. O
Col O
: O
pet O
i O
d O
C. O
Col O
: O
pet O
age O
    O
D. O
Value O
E.None O
( O
Do O
n’t O
modify O
it)2 O
. O

What O
do O
you O
mean O
by O
‘ O
aged O
’ O
? O

A. O
Col O
: O
age O
of O
student O
  O
B. O
Col O
: O
pet O
age O
C. O
Col O
: O
sex O
of O
student O
   O
D. O
Value O

E.None O
( O
Do O
n’t O
modify O
it)Uncertain O
Tokens O
Find O
the O
last O
name O
of O
the O
student O
who O
has O
a O
catthat O
is O
aged O
3.Natural O
Language O
Question O

𝐱 O
Find O
the O
last O
name O
of O
the O
student O
who O
has O
a O
‘ O
cat O
’ O
whose O
pet_age O
is O
3.NL O
Modifier O
Corrected O
Natural O
Language O
Question O
ො𝐱1 O
. O

cat O
→ O
‘ O
cat O
’ O
                              O
Rule O
: O
[ O
Noun O
; O
V O
] O
→ O
‘ O
[ O
V O
] O
’ O
   O
( O
add O
single O
quotes O
to O
indicate O
it O
is O
a O
value O
) O
2 O
. O
aged O
→ O
whose O
pet O
age O
is O
    O
Rule O
: O
[ O
Adj O
; O
C O
] O
→ O
whose O
[ O
C O
] O
is O
  O
( O
directly O
tell O
the O
column O
of O
the O
adjective O
token)Figure O
4 O
: O
Question O
Generator O
and O
NL O
Modiﬁer O
: O
an O
ex- O
ample O
. O

Shaded O
options O
in O
the O
multi O
- O
choice O
questions O
are O
selected O
by O
the O
user O
. O

Then O
, O
our O
goal O
is O
to O
increase O
s(x;x0 O
pos)and O
de- O

creases(x;x0 O
neg O
) O
. O

We O
employ O
hinge O
loss O
to O
max- O
imize O
the O
margin O
of O
the O
two O
scores O
, O
which O
is O
also O
accompanied O
by O
L1 O
- O
norm O
on O
two O
corresponding O
similarity O
matrices O
to O
make O
them O
sparse O
. O

The O
loss O
function O
is O
: O
L= O
max  O
0;m (s(x;x0 O

pos) s(x;x0 O
neg)) O
+ O
(jAposj1+jAnegj1);(4 O
) O
Wheremis O
the O
margin O
and O
balances O
the O
hinge O
loss O
and O
the O
L1 O
- O
norm O
. O

4 O
Question O
Generator O
For O
each O
uncertain O
token O
detected O
by O
the O
Error O
Lo- O
cator O
, O
the O
PIIA O
agent O
interacts O
with O
the O
user O
to O
get O
a O
more O
explicit O
explanation O
. O

Instead O
of O
asking O
the O
user O
to O
explain O
the O
uncertain O
token O
directly O
, O
we O
provide O
an O
NL O
multi O
- O
choice O
question O
. O

As O
users O
are O
non O
- O
expert O
and O
unfamiliar O
with O
database O
opera- O
tions O
, O
simply O
picking O
an O
option O
is O
more O
natural O
and O
friendly O
. O

Thus O
, O
the O
Question O
Generator O
is O
designed O
to O
generate O
a O
multi O
- O
choice O
question O
for O
each O
uncer- O
tain O
token2 O
, O
i.e. O
, O
“ O
What O
do O
you O
mean O
by O
that O
? O
” O
as O
shown O
in O
Figure O
4 O
. O

To O
make O
a O
multi O
- O
choice O
question O
, O
a O
set O
of O
can- O
didate O
options O
are O
generated O
. O

As O
analyzed O
in O
Sec- O
tion O
2 O
, O
most O
of O
the O
uncertain O
tokens O
are O
related O
to O
database O
information O
. O

Thus O
, O
for O
each O
uncertain O
token O
in O
an O
NL O
question O
, O
we O
ﬁnd O
out O
the O
corre- O
sponding O
database O
and O
add O
all O
the O
column O
and O
table O
2During O
interaction O
, O
after O
getting O
an O
answer O
to O
a O
multi- O
choice O
question O
, O
we O
check O
the O
remaining O
uncertain O
tokens O
. O

If O
an O
uncertain O
token O
exists O
in O
the O
answer O
, O
we O
delete O
the O
corre- O
sponding O
multi O
- O
choice O
question O
to O
avoid O
repeating O
. O

6917names O
into O
the O
candidate O
set O
. O

Additionally O
, O
we O
ob- O
serve O
that O
some O
uncertain O
tokens O
are O
about O
aggre- O
gation O
operations O
, O
so O
we O
also O
add O
the O
aggregation O
operations O
into O
the O
candidate O
set O
, O
such O
as O
min O
, O
max O
andsum O
. O

As O
a O
result O
, O
the O
set O
is O
quite O
large O
, O
espe- O
cially O
for O
complex O
databases O
. O

For O
example O
, O
the O
set O
size O
can O
be O
larger O
than O
40 O
in O
the O
Spider O
dataset O
. O

Hence O
, O
we O
devise O
a O
ranking O
method O
to O
ﬁnd O
out O
the O
options O
with O
the O
highest O
correlations O
to O
the O
un- O
certain O
token O
. O

Concretely O
, O
for O
each O
candidate O
op- O
tion O
( O
denoted O
by O
w O
) O
, O
we O
calculate O
its O
similarity O
score O
with O
the O
uncertain O
token O
( O
denoted O
by O
z O
) O
. O

As O
each O
candidate O
option O
is O
a O
span O
with O
one O
or O
more O
tokens O
, O
we O
adopt O
both O
lexical O
and O
semantic O
simi- O
larities O
. O

wandzare O
pre O
- O
processed O
with O
lemmati- O
zation O
. O

Then O
the O
Jaccard O
distance O
between O
them O
is O
computed O
for O
lexical O
similarity O
, O
which O
is O
the O
num- O
ber O
of O
common O
tokens O
divided O
by O
the O
number O
of O
unique O
tokens O
in O
them O
. O

For O
semantic O
similarity O
, O
we O
present O
each O
token O
as O
an O
embedding O
vector O
( O
i.e. O
, O
GloVe O
( O
Pennington O
et O
al O
. O
, O
2014 O
) O
) O
and O
employ O
the O
Euclidean O
distance O
between O
wandz O
. O

The O
embed- O
ding O
vector O
of O
a O
span O
is O
the O
average O
embedding O
over O
tokens O
in O
the O
span O
. O

All O
the O
candidate O
options O
are O
ranked O
by O
the O
summation O
of O
these O
two O
similarity O
scores O
, O
and O
three O
of O
them O
are O
picked O
as O
options O
. O

Additionally O
, O
we O
add O
two O
more O
options O
, O
Value O
and O
None O
, O
to O
each O
multi O
- O
choice O
question O
. O

Value O
indi- O
cates O
thatzis O
related O
to O
a O
value O
in O
the O
database O
. O

None O
means O
that O
either O
the O
token O
does O
not O
need O
modiﬁcation O
or O
all O
the O
other O
options O
are O
not O
related O
. O

TheNone O
option O
is O
essential O
as O
it O
prevents O
uncer- O
tain O
tokens O
from O
being O
modiﬁed O
unexpectedly O
. O

This O
alleviates O
the O
need O
for O
Error O
Locator O
to O
make O
ex- O
act O
error O
detection O
and O
ensures O
a O
higher O
recall O
rate O
. O

Following O
the O
example O
in O
Figure O
3 O
, O
we O
show O
the O
question O
generation O
process O
in O
Figure O
4 O
. O

As O
we O
can O
observe O
, O
the O
multi O
- O
choice O
questions O
are O
easy O
to O
be O
understood O
by O
non O
- O
expert O
users O
, O
and O
the O
provided O
options O
are O
reasonable O
. O

After O
interacting O
with O
users O
, O
the O
PIIA O
agent O
gets O
the O
information O
that O
“ O
cat O
” O
is O
a O
value O
, O
and O
“ O
aged O
” O
indicates O
the O
column O
“ O
pet O
age O
” O
. O

5 O
NL O
Modiﬁer O
The O
last O
module O
of O
PIIA O
is O
the O
NL O
Modiﬁer O
, O
which O
corrects O
NL O
questions O
with O
the O
users O
’ O
feedback O
, O
i.e. O
, O
how O
users O
answer O
the O
multi O
- O
choice O
questions O
. O

The O
most O
straightforward O
way O
is O
to O
directly O
replace O
the O
uncertain O
tokens O
with O
the O
selected O
options O
. O

How- O
ever O
, O
it O
is O
not O
always O
reasonable O
. O

Since O
the O
uncer- O
tain O
tokens O
can O
be O
not O
only O
nouns O
but O
also O
verbsor O
adjectives O
, O
directly O
replacing O
verbs O
or O
adjectives O
may O
cause O
incoherence O
. O

To O
avoid O
this O
problem O
, O
we O
carefully O
design O
several O
modiﬁer O
rules O
according O
to O
different O
POS O
tags O
, O
option O
types O
, O
and O
user O
NL O
ques- O
tion O
contexts O
. O

As O
mentioned O
in O
Section O
4 O
, O
there O
are O
four O
option O
types O
: O
column O
name O
, O
table O
name O
, O
ag- O
gregation O
, O
and O
value O
. O

A O
concrete O
example O
is O
shown O
in O
Figure O
4 O
, O
where O
we O
also O
list O
the O
modiﬁer O
rules O
that O
are O
applied O
. O

Since O
the O
noun O
“ O
cat O
” O
is O
selected O
as O
a O
value O
, O
the O
single O
quotes O
are O
added O
. O

It O
is O
easier O
for O
the O
parser O
to O
recognize O
it O
as O
a O
value O
because O
val- O
ues O
are O
always O
equipped O
with O
single O
quotes O
in O
the O
dataset O
. O

Moreover O
, O
as O
there O
are O
multiple O
columns O
about O
age O
in O
the O
database O
, O
the O
adjective O
“ O
aged O
” O
is O
modiﬁed O
to O
“ O
whose O
pet O
age O
is O
” O
to O
make O
the O
column O
name O
easier O
to O
identify O
. O

Finally O
, O
the O
corrected O
NL O
question O
^ O

xis O
fed O
into O
the O
text O
- O
to O
- O
SQL O
parser O
. O

More O
modiﬁer O
rules O
and O
examples O
are O
shown O
in O
Table O
3 O
. O

PIIA O
is O
designed O
to O
modify O
the O
user O
NL O
ques- O
tions O
instead O
of O
the O
predicted O
SQLs O
. O

Modifying O
the O
predicted O
SQLs O
is O
more O
straightforward O
but O
imprac- O
ticable O
. O

We O
conducted O
several O
surveys O
and O
found O
non O
- O
expert O
users O
had O
difﬁculty O
giving O
high O
- O
quality O
responses O
to O
modify O
SQLs O
directly O
, O
even O
for O
simple O
SQLs O
. O

Note O
that O
, O
the O
uncertain O
tokens O
found O
by O
PIIA O
are O
the O
unaligned O
tokens O
in O
NL O
questions O
, O
so O
the O
users O
’ O
feedback O
to O
uncertain O
tokens O
can O
not O
be O
used O
to O
modify O
the O
corresponding O
SQLs O
. O

6 O
Experiments O
In O
this O
section O
, O
we O
ﬁrstly O
introduce O
the O
experimen- O
tal O
setup O
. O

Then O
we O
assess O
PIIA O
by O
using O
both O
sim- O
ulation O
and O
human O
evaluation O
, O
and O
ﬁnally O
we O
per- O
form O
a O
closer O
analysis O
of O
PIIA O
. O

6.1 O
Experimental O
Setup O
We O
conduct O
experiments O
on O
two O
cross O
- O
domain O
text- O
to O
- O
SQL O
datasets O
with O
ﬁve O
base O
parsers O
. O

TheWikiSQL O
dataset O
( O
Zhong O
et O
al O
. O
, O
2017 O
) O
col- O
lects O
24,241 O
cross O
- O
domain O
single O
- O
table O
databases O
from O
Wikipedia O
and O
contains O
80,654 O
hand- O
annotated O
pairs O
of O
NL O
questions O
and O
SQL O
queries O
. O

The O
SQL O
queries O
are O
relatively O
simple O
with O
only O
SELECT O
andWHERE O
clauses O
. O

Two O
parsers O
are O
se- O
lected O
: O
( O
1 O
) O
SQLova O
( O
Hwang O
et O
al O
. O
, O
2019 O
) O
, O
currently O
the O
best O
open O
- O
sourced O
parser O
on O
WikiSQL O
, O
uses O
table O
- O
aware O
and O
context O
- O
aware O
representations O
of O
questions O
to O
generate O
SQL O
queries O
. O

( O
2 O
) O
SQLNet O
( O
Xu O
et O
al O
. O
, O
2017 O
) O
applies O
sequence O
- O
to O
- O
set O
prediction O
and O
employs O
a O
sketch O
- O
based O
approach O
to O
predict O
SQL O
queries O
. O

We O
report O
our O
PIIA O
results O
on O
the O
test O

6918set O
, O
which O
contains O
15,878 O
samples O
. O

TheSpider O
dataset O
( O
Yu O
et O
al O
. O
, O
2018b O
) O
is O
a O
human- O
labeled O
text O
- O
to O
- O
SQL O
dataset O
that O
consists O
of O
10,181 O
NL O
questions O
and O
5,693 O
unique O
complex O
SQL O
queries O
on O
200 O
databases O
with O
multiple O
tables O
. O

It O
covers O
138 O
different O
domains O
and O
is O
much O
more O
complex O
than O
the O
WikiSQL O
dataset O
because O
it O
has O
a O
greater O
number O
of O
complex O
questions O
and O
nested O
SQL O
queries O
. O

Three O
parsers O
are O
selected O
: O
( O
1 O
) O
IR- O
Net(Guo O
et O
al O
. O
, O
2019 O
) O
, O
currently O
the O
state O
- O
of O
- O
the O
- O
art O
open O
- O
sourced O
parser O
on O
Spider O
, O
employs O
the O
coarse- O
to-ﬁne O
framework O
( O
Dong O
and O
Lapata O
, O
2018 O
) O
and O
de- O
signs O
an O
intermediate O
language O
. O

( O
2 O
) O
IRNet+BERT O
takes O
BERT O
as O
NL O
encoder O
to O
enhance O
the O
perfor- O
mance O
of O
basic O
IRNet O
. O

( O
3 O
) O
SyntaxSQLNet O
( O
Yu O
et O
al O
. O
, O
2018a O
) O
employs O
a O
SQL O
speciﬁc O
syntax O
tree O
based O
decoder O
and O
table O
- O
aware O
column O
attention O
encoders O
. O

The O
test O
set O
is O
not O
publicly O
available O
, O
so O
we O
evaluate O
PIIA O
on O
the O
development O
set O
, O
which O
contains O
1,034 O
samples O
. O

In O
Error O
Locator O
, O
the O
similarity O
threshold O
is O
set O
to O
be O
the O
average O
score O
of O
all O
the O
( O
x;x0)pairs O
in O
the O
training O
triplesX O
= O
f(x;x0 O
pos;x0 O

neg)gas O
follows O
: O
p=1 O
2jXjX O
( O
x;x0pos;x0neg)2X  O
s(x;x0 O
pos O
) O

+ O
s(x;x0 O
neg) O
: O

This O
threshold O
score O
is O
generally O
lower O
than O
align- O
ment O
scores O
of O
certain O
tokens O
and O
higher O
than O
that O
of O
uncertain O
tokens O
, O
which O
can O
help O
to O
distinguish O
certain O
and O
uncertain O
token O
alignment O
. O

For O
hyper- O
parameters O
, O
we O
set O
m= O
1and= O
0:5 O
. O

As O
for O
the O
NL O
Modiﬁer O
, O
the O
NLTK O
pos O
tagging O
model O
( O
Loper O
and O
Bird O
, O
2002 O
) O
is O
employed O
for O
pre O
- O
processing O
. O

6.2 O
Simulation O
Evaluation O
We O
build O
a O
simulator O
to O
interact O
with O
the O
PIIA O
agent O
, O
which O
aims O
to O
give O
ideal O
selections O
for O
multi O
- O
choice O
questions O
. O

We O
report O
the O
results O
achieved O
by O
ﬁve O
base O
parsers O
. O

Simulator O
The O
simulator O
chooses O
options O
on O
be- O
half O
of O
the O
real O
user O
. O

Given O
an O
NL O
question O
with O
T O
uncertain O
tokens O
, O
PIIA O
asks O
a O
multi O
- O
choice O
question O
withKoptions O
for O
each O
token O
. O

The O
simulator O
enu- O
merates O
allKTpossible O
combinations O
of O
options O
and O
feeds O
them O
into O
the O
NL O
Modiﬁer O
and O
the O
parser O
to O
get O
SQL O
queries O
. O

If O
one O
of O
these O
SQL O
queries O
is O
the O
same O
as O
the O
ground O
truth O
SQL O
, O
the O
simula- O
tor O
obtains O
the O
ideal O
selection O
. O

Otherwise O
, O
the O
PIIA O
fails O
to O
correct O
the O
NL O
question O
. O

Since O
it O
is O
too O
time- O
consuming O
to O
enumerate O
all O
KTcombinations O
, O
weModels O
SQLAcc O
ExeAcc O

Avg.#TWikiSQLSQLova O

80.7 O
86.2 O
N O
/ O
A O
+ O
PIIA O
84.9 O
88.9 O
1.3 O
SQLNet O
61.7 O
68.0 O
N O
/ O
A O
+ O
PIIA O

68.4 O
73.2 O
1.7SpiderIRNet O
53.2 O
N O
/ O
A O
N O
/ O
A O
+ O
PIIA O
59.3 O
N O
/ O
A O
2.9 O
IRNet+BERT O
61.9 O
N O
/ O
A O
N O
/ O
A O
+ O
PIIA O
63.4 O
N O
/ O
A O
2.4 O
SyntaxSQLNet O
27.2 O

N O
/ O
A O
N O
/ O
A O
+ O
PIIA O
34.2 O
N O
/ O
A O
3.4 O
Table O
1 O
: O
Simulation O
results O
of O
PIIA O
on O
the O
WikiSQL O
test O
set O
and O
the O
Spider O
development O
set O
. O

only O
rank O
and O
simulate O
the O
top O
100 O
. O

Concretely O
, O
we O
ﬁrstly O
ﬁlter O
out O
options O
whose O
tokens O
do O
not O
appear O
in O
the O
ground O
truth O
SQL O
. O

Then O
we O
provide O
a O
score O
to O
each O
left O
option O
, O
as O
Question O
Generator O
does O
in O
Section O
4 O
. O

Finally O
, O
the O
overall O
score O
for O
a O
combination O
is O
computed O
by O
summing O
up O
all O
the O
option O
scores O
in O
the O
combination O
. O

Model O
Comparison O
We O
evaluate O
PIIA O
with O
the O
simulator O
on O
both O
WikiSQL O
and O
Spider O
datasets O
. O

The O
results O
are O
shown O
in O
Table O
1 O
. O

For O
the O
Wik- O
iSQL O
dataset O
, O
we O
report O
the O
accuracy O
of O
SQL O
exact O
matching O
( O
SQLAcc O
) O
and O
the O
accuracy O
of O
execution O
( O
ExeAcc O
) O
. O

We O
can O
observe O
that O
PIIA O
boosts O
the O
per- O
formance O
for O
both O
base O
parsers O
with O
fewer O
than O
two O
average O
interaction O
turns O
( O
Avg.#T O
) O
. O

The O
absolute O
SQLAcc O
improvements O
for O
SQLova O
and O
SQLNet O
are O
4.2 O
% O
and O
6.7 O
% O
respectively O
, O
while O
the O
absolute O
ExeAcc O
improvements O
are O
2.7 O
% O
and O
5.2 O
% O
. O

The O
results O
on O
SQLNet O
are O
competitive O
with O
those O
of O
DailSQL O
( O
Gur O
et O
al O
. O
, O
2018 O
) O
, O
a O
parser O
- O
independent O
method O
designed O
for O
simple O
SQL O
. O

However O
, O
on O
av- O
erage O
, O
PIIA O
interacts O
with O
users O
by O
1.7 O
turns O
, O
while O
DialSQL O
needs O
about O
4.8 O
. O

This O
indicates O
that O
PIIA O
is O
quite O
efﬁcient O
and O
able O
to O
enhance O
text O
- O
to O
- O
SQL O
with O
only O
a O
few O
interaction O
turns O
. O

Similar O
performance O
boosts O
can O
be O
observed O
on O
the O
Spider O
dataset O
, O
which O
has O
more O
complex O
multi- O
table O
SQL O
queries O
. O

As O
execution O
results O
are O
not O
available O
, O
we O
only O
report O
the O
results O
of O
SQLAcc O
. O

The O
improvements O
on O
IRNet O
, O
IRNet+BERT O
and O
SyntaxSQLNet O
again O
demonstrate O
the O
effective- O
ness O
of O
PIIA O
. O

PIIA O
can O
also O
enhance O
the O
parser O
integrated O
with O
BERT O
, O
which O
further O
proves O
the O
ne- O
cessity O
of O
PIIA O
. O

After O
interacting O
with O
users O
, O
PIIA O
provides O
the O
revised O
NL O
questions O
in O
a O
form O
that O

6919Models O
w/o O
PIIA O
PIIA(H O
) O
PIIA(S O
) O
Avg.#T O
IRNet O
49.0 O
52.7 O
54.7 O
2.8 O
IRNet+BERT O
60.7 O
62.2 O
62.7 O
2.4 O
Table O
2 O
: O
SQL O
Accuracy O
of O
human O
evaluation O
( O
H O
) O
and O
simulation O
( O
S O
) O
on O
300 O
samples O
. O

is O
easier O
for O
parsers O
to O
understand O
. O

The O
average O
interaction O
turns O
are O
about O
three O
, O
a O
number O
users O
ﬁnd O
acceptable O
. O

Fewer O
interaction O
turns O
are O
re- O
quired O
by O
better O
parsers O
. O

Additionally O
, O
a O
smaller O
improvement O
is O
obtained O
with O
a O
better O
parser O
, O
as O
better O
parsers O
know O
NL O
questions O
better O
. O

PIIA O
is O
effective O
because O
it O
utilizes O
the O
feedback O
provided O
by O
users O
, O
who O
know O
the O
questions O
best O
, O
thus O
leading O
to O
a O
further O
narrowing O
of O
the O
gap O
between O
parsers O
and O
users O
. O

6.3 O
Human O
Evaluation O
We O
carry O
out O
the O
evaluation O
of O
PIIA O
with O
real O
users O
. O

The O
human O
evaluation O
is O
performed O
on O
the O
more O
complex O
Spider O
dataset O
and O
with O
two O
state O
- O
of O
- O
the- O
art O
parsers O
, O
i.e. O
, O
IRNet O
and O
IRNet+BERT O
. O

We O
ran- O
domly O
sample O
300 O
NL O
questions O
from O
the O
Spider O
development O
set O
and O
invite O
30 O
volunteers O
majoring O
in O
liberal O
arts O
to O
interact O
with O
the O
PIIA O
agent O
. O

Each O
NL O
question O
is O
evaluated O
by O
three O
volunteers O
, O
all O
of O
whom O
are O
non O
- O
expert O
without O
any O
background O
knowledge O
of O
SQL O
queries O
. O

We O
provide O
them O
with O
the O
NL O
questions O
and O
the O
corresponding O
databases O
, O
and O
they O
interact O
with O
PIIA O
by O
answering O
the O
multi- O
choice O
questions O
. O

The O
SQLAcc O
results O
of O
the O
human O
evaluation O
are O
shown O
in O
Table O
2 O
. O

By O
interacting O
with O
real O
users O
, O
PIIA O
boosts O
the O
overall O
SQLAcc O
of O
both O
IRNet O
and O
IRNet+BERT O
by O
an O
absolute O
improvement O
of O
3.7 O
% O
and O
1.5 O
% O
, O
respectively O
. O

This O
indicates O
that O
PIIA O
provides O
a O
friendly O
way O
to O
interact O
with O
non- O
expert O
users O
, O
who O
are O
therefore O
able O
to O
understand O
the O
multi O
- O
choice O
questions O
and O
give O
proper O
answers O
. O

The O
average O
numbers O
of O
interaction O
turns O
are O
2.8 O
and O
2.4 O
, O
respectively O
, O
which O
the O
users O
ﬁnd O
accept- O
able O
. O

We O
also O
analyze O
the O
gap O
between O
human O
evaluation O
and O
simulation O
and O
ﬁnd O
that O
some O
of O
the O
NL O
questions O
are O
ambiguous O
, O
making O
it O
hard O
for O
real O
users O
to O
distinguish O
similar O
options O
. O

6.4 O
Closer O
Analysis O
We O
use O
the O
IRNet O
parser O
on O
the O
Spider O
dataset O
to O
provide O
a O
closer O
analysis O
of O
PIIA O
. O

Similar O
observa- O
tions O
can O
be O
obtained O
with O
other O
parsers O
. O

( O
a O
) O
  O
( O
b O
) O
Figure O
5 O
: O
( O
a O
) O
Turn O
distribution O
and O
( O
b O
) O
SQLAcc O
w.r.t O
number O
of O
options O
by O
IRNet+PIIA O
on O
the O
Spider O
de- O
velopment O
set O
. O

Orange O
line O
in O
( O
b O
) O
indicates O
the O
result O
without O
PIIA O
. O

Number O
of O
Turns O
In O
interactive O
systems O
, O
the O
number O
of O
interaction O
turns O
mostly O
determines O
whether O
users O
have O
a O
positive O
experience O
as O
too O
many O
turns O
may O
tire O
them O
out O
. O

With O
that O
in O
mind O
, O
we O
ﬁgure O
out O
the O
distribution O
of O
the O
number O
of O
turns O
( O
i.e. O
, O
the O
number O
of O
multi O
- O
choice O
questions O
) O
over O
the O
Spider O
development O
set O
. O

The O
distribution O
is O
shown O
in O
Figure O
5(a O
) O
with O
the O
average O
number O
being O
2.9 O
. O

As O
observed O
, O
the O
interaction O
process O
ﬁnishes O
in O
four O
turns O
in O
nearly O
90 O
% O
of O
the O
cases O
. O

Only O
10 O
out O
of O
1,034 O
cases O
require O
an O
interaction O
process O
with O
more O
than O
ﬁve O
turns O
, O
which O
indicates O
PIIA O
is O
able O
to O
process O
such O
a O
complex O
dataset O
with O
high O
efﬁciency O
. O

We O
also O
analyze O
the O
cases O
correctly O
modiﬁed O
by O
the O
simulation O
and O
ﬁnd O
that O
about O
40 O
% O
of O
the O
multi O
- O
choice O
questions O
get O
the O
None O
answer O
, O
which O
is O
an O
acceptable O
percentage O
. O

Additionally O
, O
the O
performance O
of O
our O
Error O
Locator O
is O
adequate O
. O

Though O
there O
are O
an O
average O
of O
12.4 O
tokens O
in O
each O
NL O
question O
on O
the O
Spider O
development O
set O
, O
the O
Error O
Locator O
is O
able O
to O
ﬁnd O
about O
three O
uncertain O
tokens O
out O
of O
them O
effectively O
. O

Number O
of O
Options O
Providing O
a O
greater O
number O
of O
options O
in O
multi O
- O
choice O
questions O
increases O
the O
chances O
of O
including O
the O
correct O
one O
, O
thus O
enhanc- O
ing O
the O
performance O
of O
the O
system O
. O

With O
more O
options O
, O
however O
, O
users O
have O
to O
make O
more O
effort O
. O

Therefore O
, O
we O
conduct O
experiments O
to O
analyze O
the O
inﬂuence O
of O
the O
number O
of O
options O
on O
the O
SQLAcc O
under O
simulation O
, O
as O
shown O
in O
Figure O
5(b O
) O
. O

The O
curve O
tends O
to O
be O
smooth O
after O
ﬁve O
options O
, O
mean- O
ing O
that O
this O
number O
is O
reasonable O
and O
able O
to O
bal- O
ance O
the O
number O
of O
options O
and O
the O
need O
for O
correct O
ones O
. O

It O
’s O
worth O
mentioning O
that O
each O
question O
con- O
tains O
two O
necessary O
options O
, O
i.e. O
, O
None O
andValue O
, O

6920 O
Figure O
6 O
: O
The O
similarity O
matrix O
of O
a O
real O
case O
. O

so O
that O
the O
least O
number O
of O
options O
is O
three O
. O

Similarity O
Matrix O
The O
Error O
Locator O
module O
is O
responsible O
for O
calculating O
a O
similarity O
matrix O
A O
between O
a O
user O
’s O
NL O
question O
xand O
a O
restated O
NL O
question O
x0 O
. O

Following O
the O
example O
in O
Figure O
3 O
, O
we O
show O
the O
similarity O
matrix O
in O
Figure O
6 O
. O

“ O
last O
name O
” O
is O
evidently O
more O
similar O
to O
the O
column O
name O
“ O
lname O
” O
than O
to O
the O
others O
, O
which O
meets O
our O
expectations O
. O

Two O
uncertain O
tokens O
are O
extracted O
, O
namely O
“ O
cat O
” O
and O
“ O
age O
” O
. O

They O
are O
not O
stop O
words O
, O
and O
their O
scores O
do O
n’t O
reach O
the O
threshold O
. O

Since O
the O
token O
“ O
cat O
” O
is O
not O
expressed O
in O
the O
restated O
NL O
question O
, O
it O
has O
a O
low O
similarity O
score O
. O

Although O
“ O
age O
” O
appears O
in O
the O
restated O
NL O
question O
, O
it O
exists O
in O
two O
column O
names O
in O
the O
database O
, O
i.e. O
, O
“ O
age O
” O
from O
the O
table O
“ O
student O
” O
and O
“ O
pet O
age O
” O
from O
the O
table O
“ O
pet O
” O
. O

Thus O
the O
score O
of O
“ O
age O
” O
is O
reduced O
and O
falls O
below O
the O
threshold O
. O

Modiﬁer O
Rules O
We O
carefully O
design O
the O
modiﬁer O
rules O
for O
the O
NL O
Modiﬁer O
based O
on O
the O
uncertain O
to- O
kens O
and O
the O
selected O
options O
. O

Concretely O
, O
we O
take O
into O
consideration O
the O
types O
of O
options O
( O
column O
, O
table O
, O
value O
, O
or O
aggregation O
) O
, O
the O
POS O
taggings O
of O
the O
uncertain O
tokens O
, O
and O
the O
contexts O
of O
the O
un- O
certain O
tokens O
. O

As O
shown O
in O
Table O
1 O
, O
PIIA O
with O
the O
NL O
Modiﬁer O
improves O
the O
efﬁcacy O
of O
IRNet O
SQLAcc O
from O
53.2 O
% O
to O
59.3 O
% O
. O

Instead O
of O
using O
the O
NL O
Modiﬁer O
, O
we O
try O
a O
straightforward O
way O
to O
modify O
the O
NL O
questions O
that O
involves O
directly O
re- O

placing O
the O
uncertain O
tokens O
with O
selected O
options O
. O

With O
this O
approach O
, O
the O
simulated O
SQLAcc O
stands O
at O
54.8 O
% O
, O
a O
result O
that O
is O
much O
worse O
than O
what O
PIIA O
can O
achieve O
with O
the O
NL O
Modiﬁer O
, O
thus O
prov- O
ing O
that O
our O
module O
is O
indispensable O
. O

Case O
Study O
Table O
3 O
shows O
more O
real O
cases O
of O
users O
’ O
NL O
questions O
and O
corrected O
NL O
questionsalong O
with O
the O
corresponding O
modiﬁer O
rules O
. O

The O
words O
in O
bold O
are O
uncertain O
tokens O
and O
their O
cor- O
rections O
. O

Though O
IRNet O
wrongly O
parses O
these O
six O
cases O
, O
PIIA O
manages O
to O
solve O
them O
correctly O
. O

The O
ﬁrst O
ﬁve O
cases O
are O
modiﬁed O
by O
rules O
for O
nouns O
, O
verbs O
, O
and O
adjectives O
that O
are O
related O
to O
the O
column O
names O
in O
the O
databases O
. O

Different O
rules O
are O
applied O
to O
add O
the O
column O
names O
into O
NL O
questions O
, O
mak- O
ing O
it O
more O
explicit O
for O
the O
parser O
to O
understand O
them O
. O

Case O
6 O
shows O
an O
example O
of O
how O
to O
mod- O
ify O
the O
aggregation O
operator O
and O
the O
value O
- O
related O
tokens O
. O

PIIA O
revises O
the O
inexplicit O
NL O
questions O
by O
interacting O
with O
users O
. O

Equipped O
with O
the O
PIIA O
agent O
, O
the O
performance O
of O
the O
base O
parser O
is O
im- O
proved O
. O

7 O
Related O
Works O
The O
works O
most O
related O
to O
ours O
are O
those O
investi- O
gating O
interactive O
semantic O
parsing O
. O

For O
instance O
, O
DailSQL O
, O
proposed O
by O
Gur O
et O
al O
. O

( O
2018 O
) O
, O
aims O
to O
detect O
error O
spans O
and O
their O
categories O
based O
on O
an O
encoder O
- O
decoder O
architecture O
. O

But O
it O
is O
designed O
for O
relatively O
simple O
scenarios O
. O

In O
this O
research O
area O
, O
another O
impressive O
work O
involves O
a O
model- O
based O
interaction O
system O
, O
which O
detects O
uncertain O
tokens O
and O
asks O
questions O
relying O
on O
inner O
parser O
states O
( O
Yao O
et O
al O
. O
, O
2019 O
) O
. O

Unlike O
these O
studies O
, O
how- O
ever O
, O
we O
design O
a O
parser O
- O
independent O
interactive O
approach O
that O
can O
also O
perform O
cross O
- O
domain O
com- O
plex O
SQL O
queries O
. O

In O
the O
ﬁeld O
of O
applied O
systems O
, O
Gao O
et O
al O
. O
( O
2015 O
) O
focused O
on O
user O
interface O
design- O
ing O
and O
proposed O
an O
interactive O
semantic O
parsing O
system O
called O
Datatone O
. O

In O
contrast O
to O
them O
, O
our O
main O
contribution O
lies O
in O
the O
realm O
of O
technology O
. O

Another O
topic O
our O
method O
related O
to O
is O
query O
re- O
formulation O
. O

The O
idea O
of O
query O
reformulation O
is O
explored O
by O
Ray O
et O
al O
. O

( O
2018 O
) O
and O
Rastogi O
et O

al O
. O

( O
2019 O
) O

, O
while O
they O
apply O
this O
idea O
in O
other O
domains O
with O
different O
scenarios O
. O

Our O
work O
is O
also O
related O
to O
semantic O
parsing O
, O
the O
process O
of O
converting O
natural O
language O
utterances O
into O
logical O
forms O
. O

Sequence- O
to O
- O
sequence O
methods O
are O
widely O
applied O
to O
solve O
this O
task O
( O
Berant O
et O
al O
. O
, O
2013 O
; O
Dong O
and O
Lapata O
, O
2016 O
; O
Finegan O
- O
Dollak O
et O
al O
. O
, O
2018 O
; O
Su O
et O
al O
. O
, O
2018 O
) O
. O

To O
reduce O
search O
space O
for O
decoding O
, O
several O
works O
employed O
intermediate O
representations O
to O
gener- O
ate O
abstract O
representations O
( O
Cheng O
et O
al O
. O
, O
2017 O
; O
Goldman O
et O
al O
. O
, O
2018 O
; O

Dong O
and O
Lapata O
, O
2018 O
) O
. O

Al- O
though O
these O
methods O
have O
achieved O
an O
impressive O
performance O
in O
experimental O
studies O
, O
there O
is O
still O
a O
long O
way O
to O
go O
before O
they O
can O
be O
successfully O

6921 O
1User O
NL O
question O
: O
List O
the O
creation O
year O
, O
name O
and O
budget O
of O
each O
department O
. O

Corrected O
NL O
question O
: O
List O
the O
creation O
year O
, O
name O
and O
budget O
in O
billions O
ofeach O
department O
. O

Modifier O
Rule O
: O
[ O
Noun O
; O
C O
] O
→ O

[ O
C O
] O
  O
( O
replace O
the O
token O
with O
the O
whole O
column O
name O
) O
2User O
NL O
question O
: O
What O
are O
the O
first O
names O
of O
all O
the O
different O
drivers O
in O
alphabetical O
order O
? O

Corrected O
NL O
question O
: O
What O
are O
the O
forename O
of O
all O
the O
different O
drivers O
in O
alphabetical O
order O
? O

Modifier O
Rule O
: O
[ O
Noun O
; O
C O
] O
→ O

[ O
C O
] O
  O
( O
detect O
the O
phrase O
and O
replace O
it O
with O
the O
whole O
column O
name O
) O
3User O
NL O
question O
: O
What O
is O
the O
type O
of O
the O
document O
named O
" O
David O
CV O
" O
? O

Corrected O
NL O
question O
: O
What O
is O
the O
document O
type O
code O
of O
the O
document O
whose O
name O
is O
" O
David O
CV O
" O
? O

Modifier O
Rule O
: O
[ O
Verb O
; O
C O
] O
→ O
whose O
[ O
C O
] O
is O
  O
( O
directly O
tell O
the O
column O
name O
of O
the O
verb O
token O
) O
4User O
NL O
question O
: O
Where O
is O
the O
club O
" O
Hopkins O
Student O
Enterprises O
" O
located O
? O

Corrected O
NL O
question O
: O
Where O
is O
the O
club O
" O
Hopkins O
Student O
Enterprises O
" O
‘s O
location O
? O

Modifier O
Rule O
: O

[ O
Verb O
; O
C O
] O
→ O
‘s O
[ O
C O
] O
  O
( O
directly O
tell O
the O
column O
name O
of O
the O
verb O
token O
, O
when O
the O
token O
is O
in O
the O
end O
of O
the O
sentence O
) O
5User O
NL O
question O
: O
Show O
the O
enrollment O
and O
primary_conference O
of O
the O
oldest O
college O
. O

Corrected O
NL O
question O
: O
Show O
the O
enrollment O
and O
primary_conference O
of O
the O
oldest O
founded O
college O
. O

Modifier O
Rule O
: O

[ O
Adj O
; O
C O
] O
→ O
[ O
Adj O
] O
[ O
C O
] O
  O
( O
directly O
add O
the O
column O
name O
of O
the O
adjective O
token O
) O
   O
6User O
NL O
question O
: O
Give O
the O
mean O
GNP O
and O
total O
population O
of O
nations O
which O
are O
considered O
US O
territory O
. O

Corrected O
NL O
question O
: O
Give O
the O
average O
GNP O
and O
total O
population O
of O
nations O
which O
are O
considered O
‘ O
US O
territory O
’ O
. O

Modifier O
Rule:[Agg]→ O
[ O
Agg O
] O
  O
( O
replace O
the O
aggregation O
token O
with O
the O
most O
similar O
aggregation O
word O
) O

[ O
Noun O
; O
V O
] O
→ O
‘ O
[ O
V O
] O
’ O
( O
add O
single O
quotes O
to O
indicate O
it O
is O
a O
value O
) O
Table O
3 O
: O
Cases O
by O
IRNet+PIIA O
on O
Spider O
. O

Texts O
highlighted O
in O
gray O
indicate O
column O
names O
in O
the O
databases O
. O

applied O
in O
real O
systems O
. O

Works O
dealing O
with O
the O
task O
of O
weakly O
super- O
vised O
word O
alignment O
are O
also O
related O
to O
our O
re- O
search O
because O
our O
Error O
Locator O
module O
performs O
the O
same O
task O
. O

Some O
examples O
include O
the O
work O
of O
Liu O
and O
Sun O
( O
2015 O
) O
, O
who O
proposed O
a O
latent O
- O
variable O
log O
- O
linear O
model O
for O
word O
alignment O
, O
the O
research O
of O
Legrand O
et O
al O
. O

( O
2016 O
) O
, O
who O
used O
pairwise O

train- O
ing O
with O
negative O
sampling O
to O
train O
the O
alignment O
model O
, O
and O
a O
study O
that O
introduced O
a O
gradient- O
based O
alignment O
method O
for O
machine O
translation O
( O
He O
et O
al O
. O
, O
2019b O
) O
. O

8 O
Conclusion O
and O
Future O
Work O
We O
propose O
a O
parser O
- O
independent O
interactive O
ap- O
proach O
, O
PIIA O
, O
to O
enhance O
the O
text O
- O
to O
- O
SQL O
process O
in O
NLIDB O
systems O
. O

PIIA O
interacts O
with O
users O
via O
multi O
- O
choice O
questions O
and O
can O
be O
built O
on O
arbi- O
trary O
parsers O
. O

Experimental O
results O
show O
this O
ap- O
proach O
leads O
to O
signiﬁcant O
performance O
boosts O
on O
two O
cross O
- O
domain O
datasets O
with O
ﬁve O
different O
base O
parsers O
. O

In O
the O
future O
, O
we O
are O
interested O
in O
distilling O
and O
reusing O
the O
common O
knowledge O
from O
users O
’ O
selections O
. O

Acknowledgments O
We O
thank O
all O
the O
anonymous O
reviewers O
for O
their O
valuable O
comments O
. O

This O
work O
was O
supported O
in O
part O
by O
NSFC O
under O
Grant O
No O
. O
61532001 O
, O
Na- O
tional O
Key O
Research O
and O
Development O
Program O
of O
China O
under O
Grant O
No O
. O
2018AAA0101902 O
, O
and O
MOE O
- O
ChinaMobile O
Program O
under O
Grant O
No O
. O
MCM20170503.References O
Jonathan O
Berant O
, O
Andrew O
Chou O
, O
Roy O
Frostig O
, O
and O
Percy O
Liang O
. O

2013 O
. O

Semantic O
parsing O
on O
Freebase O
from O
question O
- O
answer O
pairs O
. O

In O
EMNLP O
. O

Ben O
Bogin O
, O
Matt O
Gardner O
, O
and O
Jonathan O
Berant O
. O
2019a O
. O

Global O
reasoning O
over O
database O
structures O
for O
text O
- O
to- O
SQL O
parsing O
. O

In O
EMNLP O
. O

Ben O
Bogin O
, O
Matt O
Gardner O
, O
and O
Jonathan O
Berant O
. O
2019b O
. O

Representing O
schema O
structure O
with O
graph O
neural O
networks O
for O
text O
- O
to O
- O
SQL O
parsing O
. O

In O
ACL O
. O

Jianpeng O
Cheng O
, O
Siva O
Reddy O
, O
Vijay O
Saraswat O
, O
and O
Mirella O
Lapata O
. O
2017 O
. O

Learning O
structured O
natural O
language O
representations O
for O
semantic O
parsing O
. O

In O
ACL O
. O

Jacob O
Devlin O
, O
Ming O
- O
Wei O
Chang O
, O
Kenton O
Lee O
, O
and O
Kristina O
Toutanova O
. O
2019 O
. O

BERT O
: O
Pre O
- O
training O
of O
deep O
bidirectional O
transformers O
for O
language O
under- O
standing O
. O

In O
NAACL O
. O

Kedar O
Dhamdhere O
, O
Kevin O
S O
McCurley O
, O
Ralﬁ O
Nahmias O
, O
Mukund O
Sundararajan O
, O
and O
Qiqi O
Yan O
. O
2017 O
. O

Ana- O
lyza O
: O
Exploring O
data O
with O
conversation O
. O

In O
IUI O
. O

Li O
Dong O
and O
Mirella O
Lapata O
. O

2016 O
. O

Language O
to O
logical O
form O
with O
neural O
attention O
. O

In O
ACL O
. O

Li O
Dong O
and O
Mirella O
Lapata O
. O

2018 O
. O

Coarse O
- O
to-ﬁne O
de- O
coding O
for O
neural O
semantic O
parsing O
. O

In O
ACL O
. O

Catherine O
Finegan O
- O
Dollak O
, O
Jonathan O
K O
Kummerfeld O
, O
Li O
Zhang O
, O
Karthik O
Ramanathan O
, O
Sesh O
Sadasivam O
, O
Rui O
Zhang O
, O
and O
Dragomir O
Radev O
. O

2018 O
. O

Improving O
text O
- O
to O
- O
SQL O
evaluation O
methodology O
. O

In O
ACL O
. O

Tong O
Gao O
, O
Mira O
Dontcheva O
, O
Eytan O
Adar O
, O
Zhicheng O
Liu O
, O
and O
Karrie O
G O
Karahalios O
. O
2015 O
. O

Datatone O
: O
Manag- O
ing O
ambiguity O
in O
natural O
language O
interfaces O
for O
data O
visualization O
. O

In O
Proceedings O
of O
the O
28th O
Annual O
ACM O
Symposium O
on O
User O
Interface O
Software O
& O
Tech- O
nology O
, O
pages O
489–500 O
. O

6922Alﬁo O
Gliozzo O
, O
Or O
Biran O
, O
Siddharth O
Patwardhan O
, O
and O
Kathleen O
McKeown O
. O

2013 O
. O

Semantic O
technologies O
in O
IBM O
Watson O
. O

In O
Proceedings O
of O
the O
Fourth O
Work- O
shop O
on O
Teaching O
NLP O
and O
CL O
, O
pages O
85–92 O
. O

Omer O
Goldman O
, O
Veronica O
Latcinnik O
, O
Udi O
Naveh O
, O
Amir O
Globerson O
, O
and O
Jonathan O
Berant O
. O

2018 O
. O

Weakly- O

supervised O
semantic O
parsing O
with O
abstract O
examples O
. O

InACL O
. O

Daya O
Guo O
, O
Yibo O
Sun O
, O
Duyu O
Tang O
, O
Nan O
Duan O
, O
Jian O
Yin O
, O
Hong O
Chi O
, O
James O
Cao O
, O
Peng O
Chen O
, O
and O
Ming O
Zhou O
. O

2018 O
. O

Question O
generation O
from O
SQL O
queries O
im- O
proves O
neural O
semantic O
parsing O
. O

In O
EMNLP O
. O

Jiaqi O
Guo O
, O
Zecheng O
Zhan O
, O
Yan O
Gao O
, O
Yan O
Xiao O
, O
Jian O
- O
Guang O
Lou O
, O
Ting O
Liu O
, O
and O
Dongmei O
Zhang O
. O

2019 O
. O

Towards O
complex O
text O
- O
to O
- O
SQL O
in O
cross- O
domain O
database O
with O
intermediate O
representation O
. O

InACL O
. O

Izzeddin O
Gur O
, O
Semih O
Yavuz O
, O
Yu O
Su O
, O
and O
Xifeng O
Yan O
. O

2018 O
. O

DialSQL O
: O
Dialogue O
based O
structured O
query O
generation O
. O

In O
ACL O
. O

Pengcheng O
He O
, O
Yi O
Mao O
, O
Kaushik O
Chakrabarti O
, O
and O
Weizhu O
Chen O
. O
2019a O
. O

X O
- O
SQL O
: O
reinforce O
schema O
representation O
with O
context O
. O

arXiv O
preprint O
arXiv:1908.08113 O
. O

Shilin O
He O
, O
Zhaopeng O
Tu O
, O
Xing O
Wang O
, O
Longyue O
Wang O
, O
Michael O
R O
Lyu O
, O
and O
Shuming O
Shi O
. O
2019b O
. O

Towards O
understanding O
neural O
machine O
translation O
with O
word O
importance O
. O

In O
EMNLP O
. O

Wonseok O
Hwang O
, O
Jinyeung O
Yim O
, O
Seunghyun O
Park O
, O
and O
Minjoon O
Seo O
. O
2019 O
. O

A O
comprehensive O
exploration O
on O
WikiSQL O
with O
table O
- O
aware O
word O
contextualiza- O
tion O
. O

In O
KR2ML O
Workshop O
at O
NeurIPS O
. O

Srinivasan O
Iyer O
, O
Ioannis O
Konstas O
, O
Alvin O
Cheung O
, O
Jayant O
Krishnamurthy O
, O
and O
Luke O
Zettlemoyer O
. O

2017 O
. O

Learn- O
ing O
a O
neural O
semantic O
parser O
from O
user O
feedback O
. O

In O
ACL O
. O

Sanjaya O
Lai O
, O
Kedar O
Doshi O
, O
Yamuna O
Esaiarasan O
, O
and O
Chaitanya O
Bhatt O
. O
2014 O
. O

Systems O
and O
methods O
for O
performing O
record O
actions O
in O
a O
multi O
- O
tenant O
database O
and O
application O
system O
. O

US O
Patent O
8,818,940 O
. O

Jo¨el O
Legrand O
, O
Michael O
Auli O
, O
and O
Ronan O
Collobert O
. O
2016 O
. O

Neural O
network O
- O
based O
word O
alignment O
through O
score O
aggregation O
. O

In O
SIGMT O
. O

Fei O
Li O
and O
HV O
Jagadish O
. O

2014 O
. O

Constructing O
an O
in- O
teractive O
natural O
language O
interface O
for O
relational O
databases O
. O

VLDB O
Endowment O
, O
8(1):73–84 O
. O

Yang O
Liu O
and O
Maosong O
Sun O
. O
2015 O
. O

Contrastive O
unsu- O
pervised O
word O
alignment O
with O
non O
- O
local O
features O
. O

In O
AAAI O
. O

Edward O
Loper O
and O
Steven O
Bird O
. O

2002 O
. O

NLTK O
: O
the O
natu- O
ral O
language O
toolkit O
. O

arXiv O
preprint O
cs/0205028 O
.Jeffrey O
Pennington O
, O
Richard O
Socher O
, O
and O
Christopher O
D. O
Manning O
. O

2014 O
. O

GloVe O
: O
Global O
vectors O
for O
word O
rep- O

resentation O
. O

In O
EMNLP O
. O

Pushpendre O
Rastogi O
, O
Arpit O
Gupta O
, O
Tongfei O
Chen O
, O
and O
Lambert O
Mathias O
. O

2019 O
. O

Scaling O
multi O
- O
domain O
dia- O
logue O
state O
tracking O
via O
query O
reformulation O
. O

arXiv O
preprint O
arXiv:1903.05164 O
. O

Avik O
Ray O
, O
Yilin O
Shen O
, O
and O
Hongxia O
Jin O
. O

2018 O
. O

Learn- O
ing O
out O
- O
of O
- O
vocabulary O
words O
in O
intelligent O
personal O
agents O
. O

In O
IJCAI O
, O
pages O
4309–4315 O
. O

Yu O
Su O
, O
Ahmed O
Hassan O
Awadallah O
, O
Miaosen O
Wang O
, O
and O
Ryen O
W O
White O
. O

2018 O
. O

Natural O
language O
interfaces O
with O
ﬁne O
- O
grained O
user O
interaction O
: O
A O
case O
study O
on O
web O
APIs O
. O

In O
SIGIR O
, O
pages O
855–864 O
. O

ACM O
. O

Xiaojun O
Xu O
, O
Chang O
Liu O
, O
and O
Dawn O
Song O
. O
2017 O
. O

SQL- O
Net O
: O
Generating O
structured O
queries O
from O
natural O
language O
without O
reinforcement O
learning O
. O

arXiv O
preprint O
arXiv:1711.04436 O
. O

Navid O
Yaghmazadeh O
, O
Yuepeng O
Wang O
, O
Isil O
Dillig O
, O
and O
Thomas O
Dillig O
. O
2017 O
. O

SQLizer O
: O
query O
synthesis O
from O
natural O
language O
. O

ACM O
on O
Programming O
Lan- O
guages O
, O
1(OOPSLA):63 O
. O

Ziyu O
Yao O
, O
Yu O
Su O
, O
Huan O
Sun O
, O
and O
Wen O
- O
tau O
Yih O
. O
2019 O
. O

Model O
- O
based O
interactive O
semantic O
parsing O
: O
A O
uni- O
ﬁed O
framework O
and O
a O
text O
- O
to O
- O
SQL O
case O
study O
. O

In O
EMNLP O
. O

Tao O
Yu O
, O
Michihiro O
Yasunaga O
, O
Kai O
Yang O
, O
Rui O
Zhang O
, O
Dongxu O
Wang O
, O
Zifan O
Li O
, O
and O
Dragomir O
Radev O
. O
2018a O
. O

SyntaxSQLnet O
: O

Syntax O
tree O
networks O
for O
complex O
and O
cross O
- O
domain O
text O
- O
to O
- O
SQL O
task O
. O

In O
EMNLP O
. O

Tao O
Yu O
, O
Rui O
Zhang O
, O
Kai O
Yang O
, O
Michihiro O
Yasunaga O
, O
Dongxu O
Wang O
, O
Zifan O
Li O
, O
James O
Ma O
, O
Irene O
Li O
, O
Qingn- O
ing O
Yao O
, O
Shanelle O
Roman O
, O
et O
al O
. O
2018b O
. O

Spider O
: O

A O
large O
- O
scale O
human O
- O
labeled O
dataset O
for O
complex O
and O
cross O
- O
domain O
semantic O
parsing O
and O
text O
- O
to O
- O
SQL O
task O
. O

InEMNLP O
. O

Victor O
Zhong O
, O
Caiming O
Xiong O
, O
and O
Richard O
Socher O
. O

2017 O
. O

Seq2SQL O
: O

Generating O
structured O
queries O
from O
natural O
language O
using O
reinforcement O
learning O
. O
InCoRR O
. O

